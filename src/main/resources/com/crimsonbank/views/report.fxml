<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.crimsonbank.controllers.ReportController">

    <top>
        <VBox style="-fx-background-color: linear-gradient(to right, #0055cc, #0066ee); -fx-padding: 20px;">
            <HBox alignment="CENTER_LEFT" spacing="20">
                <Button fx:id="backButton"
                        text="â† Back"
                        onAction="#handleBackToDashboard"/>
                <Label text="Reports &amp; Analytics"
                       styleClass="label-heading"
                       style="-fx-font-size: 22; -fx-font-weight: 800; -fx-text-fill: white;"/>
            </HBox>
        </VBox>
    </top>

    <center>
        <BorderPane>
            <center>
                <TabPane tabClosingPolicy="UNAVAILABLE" style="-fx-padding: 20px 20px 20px 20px;">

                    <Tab text="Transaction Analysis" closable="false">
                        <BorderPane style="-fx-padding: 20px;">
                            <top>
                                <HBox spacing="12" style="-fx-min-height: 50px;">
                                    <ComboBox fx:id="transactionTypeCombo"
                                              promptText="Transaction Type"
                                              prefWidth="150"
                                              styleClass="combo-box"/>
                                    <Button fx:id="transactionGenerateButton" text="ðŸ“Š Generate"
                                            onAction="#handleGenerateTransactionReport"
                                            styleClass="button-primary"
                                            style="-fx-padding: 10px 20px;"/>
                                    <Button fx:id="exportCsvButton" text="ðŸ“¥ Export to CSV"
                                            onAction="#handleExportCsv"
                                            styleClass="button-success"
                                            style="-fx-padding: 10px 20px;"/>
                                </HBox>
                            </top>
                            <center>
                                <PieChart fx:id="transactionPieChart" style="-fx-padding: 20px;"/>
                            </center>
                        </BorderPane>
                    </Tab>

                    <Tab text="Monthly Volume" closable="false">
                        <BorderPane style="-fx-padding: 20px;">
                            <top>
                                <HBox spacing="12" style="-fx-min-height: 50px;">
                                    <Button fx:id="monthlyGenerateButton" text="ðŸ“ˆ Generate Report"
                                            onAction="#handleGenerateMonthlyReport"
                                            styleClass="button-primary"
                                            style="-fx-padding: 10px 20px;"/>
                                </HBox>
                            </top>
                            <center>
                                <BarChart fx:id="monthlyBarChart" style="-fx-padding: 20px;">
                                    <xAxis>
                                        <CategoryAxis/>
                                    </xAxis>
                                    <yAxis>
                                        <NumberAxis/>
                                    </yAxis>
                                </BarChart>
                            </center>
                        </BorderPane>
                    </Tab>

                    <Tab text="Summary Statistics" closable="false">
                        <BorderPane style="-fx-padding: 20px;">
                            <center>
                                <GridPane hgap="30" vgap="16" style="-fx-padding: 20px;">
                                    <Label text="Total Transactions:"
                                           styleClass="label"
                                           GridPane.columnIndex="0"
                                           GridPane.rowIndex="0"/>
                                    <Label fx:id="totalTransLabel"
                                           text="0"
                                           style="-fx-font-size: 16; -fx-font-weight: 700; -fx-text-fill: #0055cc;"
                                           GridPane.columnIndex="1"
                                           GridPane.rowIndex="0"/>

                                    <Label text="Total Volume:"
                                           styleClass="label"
                                           GridPane.columnIndex="0"
                                           GridPane.rowIndex="1"/>
                                    <Label fx:id="totalVolumeLabel"
                                           text="0.00"
                                           style="-fx-font-size: 16; -fx-font-weight: 700; -fx-text-fill: #10b981;"
                                           GridPane.columnIndex="1"
                                           GridPane.rowIndex="1"/>

                                    <Label text="Average Transaction:"
                                           styleClass="label"
                                           GridPane.columnIndex="0"
                                           GridPane.rowIndex="2"/>
                                    <Label fx:id="avgTransLabel"
                                           text="0.00"
                                           style="-fx-font-size: 16; -fx-font-weight: 700; -fx-text-fill: #f59e0b;"
                                           GridPane.columnIndex="1"
                                           GridPane.rowIndex="2"/>

                                    <Label text="Top Account:"
                                           styleClass="label"
                                           GridPane.columnIndex="0"
                                           GridPane.rowIndex="3"/>
                                    <Label fx:id="topAccountLabel"
                                           text="N/A"
                                           style="-fx-font-size: 16; -fx-font-weight: 700; -fx-text-fill: #6366f1;"
                                           GridPane.columnIndex="1"
                                           GridPane.rowIndex="3"/>
                                </GridPane>
                            </center>
                        </BorderPane>
                    </Tab>

                </TabPane>
            </center>
        </BorderPane>
    </center>

</BorderPane>
